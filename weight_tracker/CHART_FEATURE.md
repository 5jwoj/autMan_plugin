# ä½“é‡æ›²çº¿å›¾åŠŸèƒ½è¯´æ˜

## ğŸ¨ æ–°åŠŸèƒ½: ä½“é‡å˜åŒ–æ›²çº¿å›¾

**ç‰ˆæœ¬**: v2.1.0  
**æ›´æ–°æ—¥æœŸ**: 2026-01-12

## âœ¨ åŠŸèƒ½ä»‹ç»

ç°åœ¨å½“ä½ æŸ¥çœ‹ä½“é‡è®°å½•æ—¶,æ’ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€å¼ ç²¾ç¾çš„ä½“é‡å˜åŒ–æ›²çº¿å›¾!

### å›¾è¡¨ç‰¹ç‚¹

- ğŸ“ˆ **æ¸…æ™°çš„è¶‹åŠ¿çº¿**: ç›´è§‚å±•ç¤ºä½“é‡å˜åŒ–è¶‹åŠ¿
- ğŸ¯ **ç›®æ ‡çº¿**: å¦‚æœè®¾ç½®äº†ç›®æ ‡ä½“é‡,ä¼šæ˜¾ç¤ºçº¢è‰²è™šçº¿
- ğŸ“Š **æ•°æ®æ ‡æ³¨**: æ¯ä¸ªæ•°æ®ç‚¹éƒ½æ ‡æ³¨äº†å…·ä½“æ•°å€¼
- ğŸ—“ï¸ **æ—¥æœŸè½´**: Xè½´æ˜¾ç¤ºæ—¥æœŸ,æ–¹ä¾¿è¿½è¸ª
- ğŸ“ **ç½‘æ ¼çº¿**: è¾…åŠ©çº¿å¸®åŠ©è¯»å–æ•°å€¼

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æŸ¥çœ‹æ›²çº¿å›¾

```
ä½ : ä½“é‡è®°å½•

æ’ä»¶: ğŸ“Š ä½“é‡è®°å½• (å…±5æ¡)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ—“ï¸ 1æœˆ12æ—¥
  ğŸ“Š 65.5kg

ğŸ—“ï¸ 1æœˆ11æ—¥
  ğŸ“Š 66.0kg â†“ -0.5kg

... (æ›´å¤šè®°å½•)

[éšåå‘é€æ›²çº¿å›¾å›¾ç‰‡]
```

### å›¾è¡¨ç¤ºä¾‹

æ›²çº¿å›¾åŒ…å«:
- **è“è‰²æ›²çº¿**: ä½“é‡å˜åŒ–è¶‹åŠ¿
- **çº¢è‰²è™šçº¿**: ç›®æ ‡ä½“é‡(å¦‚æœå·²è®¾ç½®)
- **é»„è‰²æ ‡æ³¨**: æ¯ä¸ªæ•°æ®ç‚¹çš„å…·ä½“æ•°å€¼
- **ç½‘æ ¼èƒŒæ™¯**: æ–¹ä¾¿è¯»å–æ•°å€¼

## ğŸ“‹ ä¾èµ–è¦æ±‚

### Pythonåº“

æ’ä»¶éœ€è¦ä»¥ä¸‹Pythonåº“:

```bash
# å®‰è£…matplotlib
pip3 install matplotlib

# æˆ–ä½¿ç”¨ç³»ç»ŸåŒ…ç®¡ç†å™¨
# macOS
brew install python-matplotlib

# Ubuntu/Debian
sudo apt-get install python3-matplotlib
```

### ä¸­æ–‡å­—ä½“

ä¸ºäº†æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡,éœ€è¦ç³»ç»Ÿå®‰è£…ä¸­æ–‡å­—ä½“:

- **macOS**: é€šå¸¸å·²å†…ç½® Arial Unicode MS
- **Linux**: éœ€è¦å®‰è£…ä¸­æ–‡å­—ä½“
  ```bash
  sudo apt-get install fonts-wqy-microhei
  ```

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### å›¾è¡¨ç”Ÿæˆæµç¨‹

1. **æ•°æ®æå–**: ä»å­˜å‚¨ä¸­è·å–æ‰€æœ‰ä½“é‡è®°å½•
2. **æ•°æ®å¤„ç†**: æŒ‰æ—¥æœŸæ’åº,æå–æ—¥æœŸå’Œä½“é‡æ•°æ®
3. **å›¾è¡¨ç»˜åˆ¶**: ä½¿ç”¨matplotlibç»˜åˆ¶æ›²çº¿
4. **æ·»åŠ è£…é¥°**: æ·»åŠ ç›®æ ‡çº¿ã€æ•°æ®æ ‡æ³¨ã€ç½‘æ ¼ç­‰
5. **ä¿å­˜å›¾ç‰‡**: ä¿å­˜ä¸ºä¸´æ—¶PNGæ–‡ä»¶
6. **å‘é€å›¾ç‰‡**: é€šè¿‡autManå‘é€ç»™ç”¨æˆ·
7. **æ¸…ç†æ–‡ä»¶**: åˆ é™¤ä¸´æ—¶æ–‡ä»¶

### ä»£ç å®ç°

```python
def generate_weight_chart(self, data):
    """ç”Ÿæˆä½“é‡æ›²çº¿å›¾"""
    # æå–æ•°æ®
    dates = [datetime.strptime(r['date'], '%Y-%m-%d') for r in sorted_records]
    weights = [r['weight'] for r in sorted_records]
    
    # åˆ›å»ºå›¾è¡¨
    fig, ax = plt.subplots(figsize=(12, 6))
    ax.plot(dates, weights, marker='o', linestyle='-', linewidth=2)
    
    # æ·»åŠ ç›®æ ‡çº¿
    if data.get('target'):
        ax.axhline(y=data['target'], color='#E74C3C', linestyle='--')
    
    # ä¿å­˜å¹¶è¿”å›
    temp_file = tempfile.NamedTemporaryFile(delete=False, suffix='.png')
    plt.savefig(temp_file.name, dpi=150)
    return temp_file.name
```

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1: å›¾è¡¨ä¸æ˜¾ç¤º

**å¯èƒ½åŸå› **:
- matplotlibæœªå®‰è£…
- ä¸­æ–‡å­—ä½“ç¼ºå¤±
- å›¾ç‰‡å‘é€å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥matplotlib
python3 -c "import matplotlib; print(matplotlib.__version__)"

# å®‰è£…matplotlib
pip3 install matplotlib

# æŸ¥çœ‹æ—¥å¿—
tail -f /path/to/autMan/logs/plugin.log
```

### é—®é¢˜2: ä¸­æ–‡æ˜¾ç¤ºä¸ºæ–¹å—

**è§£å†³æ–¹æ¡ˆ**:
```bash
# macOS - é€šå¸¸æ— éœ€å¤„ç†

# Linux - å®‰è£…ä¸­æ–‡å­—ä½“
sudo apt-get install fonts-wqy-microhei fonts-wqy-zenhei

# æ¸…é™¤matplotlibç¼“å­˜
rm -rf ~/.cache/matplotlib
```

### é—®é¢˜3: å›¾ç‰‡å‘é€å¤±è´¥

**å¯èƒ½åŸå› **:
- ä¸´æ—¶æ–‡ä»¶è·¯å¾„é—®é¢˜
- autManå›¾ç‰‡å‘é€APIé—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
æ£€æŸ¥ä»£ç ä¸­çš„å›¾ç‰‡å‘é€æ–¹å¼:
```python
# ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„è·¯å¾„æ ¼å¼
self.sender.sendImage(f"file://{chart_path}")
```

## ğŸ“Š å›¾è¡¨æ ·å¼è‡ªå®šä¹‰

### ä¿®æ”¹é¢œè‰²

åœ¨`generate_weight_chart`æ–¹æ³•ä¸­:

```python
# ä¿®æ”¹æ›²çº¿é¢œè‰²
ax.plot(dates, weights, color='#FF6B6B')  # çº¢è‰²

# ä¿®æ”¹ç›®æ ‡çº¿é¢œè‰²
ax.axhline(y=data['target'], color='#4ECDC4')  # é’è‰²
```

### ä¿®æ”¹å°ºå¯¸

```python
# ä¿®æ”¹å›¾è¡¨å¤§å°
fig, ax = plt.subplots(figsize=(16, 8))  # æ›´å¤§çš„å›¾è¡¨

# ä¿®æ”¹DPI(æ¸…æ™°åº¦)
plt.savefig(temp_file.name, dpi=300)  # æ›´é«˜æ¸…
```

### ä¿®æ”¹æ ‡æ³¨æ ·å¼

```python
# ä¿®æ”¹æ•°æ®ç‚¹æ ‡æ³¨
ax.annotate(f'{weight}kg', 
           xy=(date, weight),
           fontsize=12,  # æ›´å¤§çš„å­—ä½“
           bbox=dict(boxstyle='round,pad=0.5', 
                    facecolor='lightblue',  # æµ…è“è‰²èƒŒæ™¯
                    alpha=0.5))
```

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### 1. æ•°æ®ç§¯ç´¯
è‡³å°‘è®°å½•3-5å¤©çš„æ•°æ®å,æ›²çº¿å›¾æ‰æœ‰æ„ä¹‰ã€‚

### 2. å®šæœŸæŸ¥çœ‹
å»ºè®®æ¯å‘¨æŸ¥çœ‹ä¸€æ¬¡æ›²çº¿å›¾,äº†è§£æ•´ä½“è¶‹åŠ¿ã€‚

### 3. ç»“åˆç›®æ ‡
è®¾ç½®ç›®æ ‡ä½“é‡å,æ›²çº¿å›¾ä¼šæ˜¾ç¤ºç›®æ ‡çº¿,æ›´ç›´è§‚ã€‚

### 4. ä¿å­˜å›¾ç‰‡
å¦‚æœéœ€è¦ä¿å­˜å›¾ç‰‡,å¯ä»¥åœ¨èŠå¤©ä¸­é•¿æŒ‰å›¾ç‰‡ä¿å­˜ã€‚

## ğŸ¯ æœªæ¥è®¡åˆ’

å¯èƒ½æ·»åŠ çš„åŠŸèƒ½:

- [ ] å¤šç§å›¾è¡¨æ ·å¼é€‰æ‹©
- [ ] BMIæ›²çº¿å›¾
- [ ] å‘¨/æœˆæŠ¥è¡¨å›¾
- [ ] æ•°æ®å¯¹æ¯”å›¾(å¤šäººå¯¹æ¯”)
- [ ] å¯¼å‡ºPDFæŠ¥å‘Š

## ğŸ“š ç›¸å…³èµ„æº

- [Matplotlibå®˜æ–¹æ–‡æ¡£](https://matplotlib.org/)
- [Pythonæ—¥æœŸå¤„ç†](https://docs.python.org/3/library/datetime.html)
- [autManå›¾ç‰‡å‘é€API](https://bbs.autman.cn)

---

**äº«å—å¯è§†åŒ–çš„ä½“é‡ç®¡ç†ä½“éªŒ! ğŸ“Š**
